"0","split_counts <- population_2021_with_2011 %>%"
"0","  group_by(`LSOA 2021 Code`) %>%"
"0","  summarise(n_split = n(), .groups = ""drop"")"
"0",""
"0","population_adjusted <- population_2021_with_2011 %>%"
"0","  left_join(split_counts, by = ""LSOA 2021 Code"") %>%"
"0","  mutate(adjusted_population = Total / n_split)"
"0",""
"0","population_2011_unique <- population_adjusted %>%"
"0","  group_by(LSOA11CD) %>%"
"0","  summarise(population_2011 = sum(adjusted_population, na.rm = TRUE), .groups = ""drop"")"
"0",""
"0","population_2011_recomputed <- population_2021_with_2011 %>%"
"0","  group_by(LSOA11CD) %>%"
"0","  summarise(value = sum(Total, na.rm = TRUE), .groups = ""drop"") %>%"
"0","  mutate(year = 2021)"
"0",""
"0","population_cleaned <- population %>%"
"0","  dplyr::select(LSOA_code, value, year) %>%"
"0","  filter(LSOA_code %in% london_lsoas)"
"0",""
"0","population_2021_final <- population_2011_recomputed %>%"
"0","  rename(LSOA_code = LSOA11CD)"
"0",""
"0","population_all_years <- bind_rows(population_cleaned, population_2021_final)"
