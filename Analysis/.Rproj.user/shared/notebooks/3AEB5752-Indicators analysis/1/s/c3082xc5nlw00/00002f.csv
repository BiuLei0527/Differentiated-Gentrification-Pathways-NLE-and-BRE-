"0","years <- c(2011, 2013, 2015, 2017)"
"0",""
"0","income_list <- lapply(years, function(year) {"
"0","  file_path <- paste0(""/Users/xilver/Desktop/CASA0004/Data/income/"", year, ""_income.xls"")"
"0",""
"0","  if (file.exists(file_path)) {"
"0","    if (year %in% c(2011, 2013)) {"
"0","      data <- read_excel(file_path, sheet = ""Total weekly income"", skip = 4)"
"0","      data$`Total annual income (£)` <- data$`Total weekly income (£)` * 52.18"
"0","    } else {"
"0","      data <- read_excel(file_path, sheet = ""Total annual income"", skip = 4)"
"0","      data$`Total annual income (£)` <- data$`Total annual income (£)`"
"0","    }"
"0","    print(paste(""Success:"", file_path))"
"0","    data <- data %>%"
"0","      filter(`Region name` == ""London"")"
"0","    return(data)"
"0","  } else {"
"0","    warning(paste(""No such files:"", file_path))"
"0","    return(NULL)"
"0","  }"
"0","})"
"1","[1]"
"1"," ""Success: /Users/xilver/Desktop/CASA0004/Data/income/2011_income.xls"""
"1","
"
"1","[1]"
"1"," ""Success: /Users/xilver/Desktop/CASA0004/Data/income/2013_income.xls"""
"1","
"
"1","[1]"
"1"," ""Success: /Users/xilver/Desktop/CASA0004/Data/income/2015_income.xls"""
"1","
"
"1","[1]"
"1"," ""Success: /Users/xilver/Desktop/CASA0004/Data/income/2017_income.xls"""
"1","
"
"0","names(income_list) <- paste0(""income_"", years)"
"0","income_list <- Filter(Negate(is.null), income_list)"
"0",""
"0","list2env(income_list, .GlobalEnv)"
"1","<environment: R_GlobalEnv>
"
"0","for (name in names(income_list)) {"
"0","  print(paste(name, "":""))"
"0","  print(head(get(name)))"
"0","}"
"1","[1]"
"1"," ""income_2011 :"""
"1","
"
